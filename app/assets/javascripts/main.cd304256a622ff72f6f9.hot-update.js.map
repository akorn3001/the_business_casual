{"version":3,"sources":["webpack:///./frontend/components/Presentational/article_edit.jsx"],"names":["ArticleEdit","props","state","title","body","imageFile","handleChange","bind","handlePublish","handleQuill","handleFile","handleCancel","requestSingleArticle","match","params","articleID","article","setState","prevProps","value","attribute","e","preventDefault","target","history","push","id","formDataObject","FormData","append","requestUpdateArticle","then","currentTarget","files","imagePreview","fileName","component","name","width","height","imageURL","React","Component"],"mappings":"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","file":"main.cd304256a622ff72f6f9.hot-update.js","sourcesContent":["import React from 'react';\nimport ReactQuill from 'react-quill';\nimport DOMPurify from 'dompurify';\n\nclass ArticleEdit extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      title: \"\",\n      body: \"\",\n      imageFile: null\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handlePublish = this.handlePublish.bind(this);\n    this.handleQuill = this.handleQuill.bind(this);\n    this.handleFile = this.handleFile.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.requestSingleArticle(this.props.match.params.articleID);\n    if (this.props.article) {\n      this.setState({\n        title: this.props.article.title,\n        body: this.props.article.body,\n        imageFile: this.props.article.imageFile\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (!prevProps.article && this.props.article) {\n      this.setState({\n        title: this.props.article.title,\n        body: this.props.article.body,\n        imageFile: this.props.article.imageFile\n      });\n    }\n  }\n  // componentWillReceiveProps(nextProps) {\n  //   if (nextProps.article) {\n  //     this.setState({\n  //       title: nextProps.article.title,\n  //       body: nextProps.article.body,\n  //       imageFile: nextProps.article.imageFile\n  //     });\n  //   }\n  // }\n\n  handleQuill(value) {\n    this.setState({ body: value });\n  }\n\n  handleChange(attribute) {\n    return (e) => {\n      e.preventDefault();\n      this.setState({ [attribute]: e.target.value });\n    };\n  }\n\n  handleCancel(e) {\n    e.preventDefault();\n    this.props.history.push(`/articles/${this.props.article.id}`);\n  }\n\n  handlePublish(e) {\n    e.preventDefault();\n    const formDataObject = new FormData();\n    formDataObject.append('article[title]', this.state.title);\n    formDataObject.append('article[body]', this.state.body);\n    formDataObject.append('article[published]', true);\n\n    if (this.state.imageFile) {\n      formDataObject.append('article[image]', this.state.imageFile);\n    }\n\n    this.props.requestUpdateArticle(formDataObject, this.props.article.id)\n      .then(this.props.history.push('/articles'));\n  }\n\n\n  handleFile(e) {\n    this.setState({ imageFile: e.currentTarget.files[0] });\n  }\n\n  render() {\n    let imagePreview;\n    let fileName;\n    let component;\n\n    if (this.state.imageFile) {\n      fileName = <span id=\"image-upload-message\">{this.state.imageFile.name} successfully attached</span>;\n      imagePreview = <img style={{width: \"100px\", height: \"auto\"}} src={this.props.article.imageURL} />;\n    } else {\n      fileName = null;\n      imagePreview = null;\n    }\n    fileName =\n    (this.state.imageFile ?\n      <span id=\"image-upload-message\">{this.state.imageFile.name} successfully attached</span>\n        : null);\n\n    component =\n    <div id=\"article-form\">\n      <form>\n        <div className=\"article-form-title\">\n          <label htmlFor=\"title\">Title: </label>\n          <input\n            onChange={this.handleChange('title')}\n            className=\"article-form-title-input\"\n            value={this.state.title}\n            name=\"title\"\n            type=\"text\"\n            placeholder=\"Add Title\"\n          />\n        </div>\n\n        <ReactQuill\n          className=\"quill-element\"\n          theme=\"snow\"\n          value={this.state.body}\n          onChange={this.handleQuill}\n          placeholder=\"Write your article here\"\n        />\n\n        <div className=\"article-form-submit-buttons\">\n          <input name=\"file-input\" id=\"file-input\" type=\"file\" accept=\"image/*\" onChange={this.handleFile}/>\n          <label className=\"file-input-label form-submit\" htmlFor=\"file-input\">Upload an Image!</label>\n          <button className=\"article-form-button form-submit\" onClick={this.handleCancel}>Cancel Changes</button>\n          <button className=\"article-form-button form-submit\" onClick={this.handlePublish}>Save Changes!</button>\n        </div>\n        {fileName}\n        {imagePreview}\n      </form>\n    </div>;\n\n    return (\n      <div>\n        { component }\n      </div>\n    );\n  }\n}\n\n\n\nexport default ArticleEdit;\n"],"sourceRoot":""}